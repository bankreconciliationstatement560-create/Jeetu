<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– AI Family Life - REAL GEMINI AI! ğŸ§</title>
    <style>
        :root {
            --bg: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%);
            --card: rgba(255,255,255,0.98);
            --text: #2d3436;
            --accent: #ff6b6b;
            --success: #00b894;
            --border: rgba(255,255,255,0.3);
        }
        [data-theme="dark"] {
            --bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%);
            --card: rgba(45,52,54,0.98);
            --text: #e9ecef;
            --accent: #fd79a8;
            --success: #00b894;
            --border: rgba(255,255,255,0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
        
        .header { position: fixed; top: 0; left: 0; right: 0; background: var(--card); padding: 15px 20px; z-index: 1000; box-shadow: 0 5px 20px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 15px; }
        .theme-panel { display: flex; gap: 10px; }
        .theme-btn { width: 45px; height: 45px; border: none; border-radius: 50%; cursor: pointer; font-size: 18px; }
        .theme-btn.active { border: 3px solid white; transform: scale(1.1); }
        .ai-badge { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 25px; font-size: 14px; font-weight: bold; }
        
        .container { max-width: 1200px; margin: 80px auto 20px; padding: 0 15px; display: grid; grid-template-columns: 1fr 380px; gap: 25px; }
        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } }
        
        .card { background: var(--card); border-radius: 20px; padding: 25px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); border: 1px solid var(--border); }
        
        .family-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }
        .family-member { padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s; border: 2px solid transparent; }
        .family-member:hover { transform: translateY(-3px); border-color: var(--accent); }
        .family-member.active { border-color: var(--success); background: rgba(0,184,148,0.2); }
        
        .wallet-balance { font-size: 36px; font-weight: 900; color: var(--success); text-align: center; margin: 15px 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; }
        .item { padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s; border: 2px solid transparent; }
        .item:hover { transform: translateY(-5px); border-color: var(--accent); }
        .item.affordable { border-color: var(--success); background: rgba(0,184,148,0.1); }
        
        .love-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border); }
        .avatar-large { width: 70px; height: 70px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; font-size: 28px; }
        .love-meter { background: linear-gradient(90deg, #ff4757 0%, #ffa502 50%, #00b894 100%); color: white; padding: 10px 20px; border-radius: 25px; font-weight: bold; }
        
        .chat-area { flex: 1; display: flex; flex-direction: column; }
        .chat-messages { height: 350px; overflow-y: auto; border: 2px dashed var(--border); border-radius: 15px; padding: 15px; margin-bottom: 15px; background: rgba(255,255,255,0.1); }
        .message { margin-bottom: 12px; opacity: 0; animation: slideIn 0.3s forwards; }
        @keyframes slideIn { to { opacity: 1; } }
        .user { text-align: right; } .ai { text-align: left; }
        .message-content { display: inline-block; max-width: 80%; padding: 12px 18px; border-radius: 20px; }
        .user .message-content { background: var(--accent); color: white; }
        .ai .message-content { background: linear-gradient(135deg, #f093fb, #f5576c); color: white; }
        
        .voice-controls { display: flex; gap: 10px; margin-bottom: 15px; }
        .mic-btn { width: 60px; height: 60px; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; transition: all 0.3s; }
        .mic-listening { background: #ff4757; color: white; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        .input-row { display: flex; gap: 10px; align-items: center; }
        .chat-input { flex: 1; padding: 12px 18px; border: 2px solid var(--border); border-radius: 25px; background: rgba(255,255,255,0.7); font-size: 16px; }
        .btn { padding: 12px 20px; background: var(--success); color: white; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body data-theme="light">
    <div class="header">
        <div class="theme-panel">
            <button class="theme-btn active" onclick="setTheme('light')">â˜€ï¸</button>
            <button class="theme-btn" onclick="setTheme('dark')">ğŸŒ™</button>
            <button class="theme-btn" onclick="setTheme('purple')">ğŸ’œ</button>
        </div>
        <div class="ai-badge">ğŸ¤– GEMINI AI</div>
        <div style="flex: 1; text-align: center; font-weight: bold;" id="userName">Rahul</div>
    </div>

    <div class="container">
        <div>
            <div class="card">
                <h3 style="text-align: center; margin-bottom: 15px;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family</h3>
                <div class="family-grid" id="familyGrid"></div>
            </div>

            <div class="card">
                <div style="font-size: 50px; text-align: center; margin-bottom: 10px;">ğŸ’°</div>
                <div class="wallet-balance" id="wallet">$100</div>
            </div>

            <div class="card">
                <h3 style="text-align: center; margin-bottom: 15px;">ğŸ’¼ Jobs</h3>
                <div class="grid">
                    <div class="item" onclick="quickJob('delivery', 50)"><div style="font-size: 36px;">ğŸ“¦</div>Delivery $50</div>
                    <div class="item" onclick="quickJob('waiter', 40)"><div style="font-size: 36px;">ğŸ½ï¸</div>Waiter $40</div>
                    <div class="item" onclick="quickJob('driver', 60)"><div style="font-size: 36px;">ğŸš—</div>Driver $60</div>
                </div>
            </div>
        </div>

        <div class="card chat-area">
            <div class="love-header">
                <div class="avatar-large" id="currentAvatar">ğŸ˜</div>
                <div style="font-size: 22px; font-weight: bold; flex: 1;" id="currentName">Aisha</div>
                <div class="love-meter" id="currentLove">Love: 0%</div>
            </div>
            
            <div class="voice-controls">
                <button class="mic-btn" id="micBtn" onclick="toggleVoice()" title="Voice Chat">ğŸ¤</button>
                <div style="flex: 1; text-align: center; font-size: 14px; opacity: 0.7;" id="voiceStatus">Click mic to speak</div>
            </div>
            
            <div class="chat-messages" id="chatMessages"></div>
            <div class="input-row">
                <input class="chat-input" id="chatInput" placeholder="Type or speak..." onkeypress="if(event.key==='Enter') sendChat()">
                <button class="btn" onclick="sendChat()">Send</button>
            </div>
        </div>
    </div>

    <script>
        let user = {name: 'Rahul'};
        let family = [];
        let wallet = 100;
        let currentChar = {};
        let isListening = false;
        let recognition;
        
        init();
        
        function init() {
            if('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'hi-IN';
            }
            
            loadData();
            renderFamily();
            updateUI();
        }
        
        function loadData() {
            const saved = localStorage.getItem('aiFamilyData');
            if(saved) {
                const data = JSON.parse(saved);
                user = data.user || user;
                family = data.family || family;
                wallet = data.wallet || 100;
            } else {
                family = [
                    {name: 'Aisha', type: 'gf', emoji: 'ğŸ˜', love: 0},
                    {name: 'Mummy', type: 'mom', emoji: 'ğŸ‘©', love: 70},
                    {name: 'Papa', type: 'dad', emoji: 'ğŸ‘¨', love: 80}
                ];
            }
            currentChar = family[0];
            saveData();
        }
        
        function saveData() {
            localStorage.setItem('aiFamilyData', JSON.stringify({user, family, wallet}));
        }
        
        function renderFamily() {
            document.getElementById('familyGrid').innerHTML = family.map((m,i) => `
                <div class="family-member ${i===0?'active':''}" onclick="switchChar(${i})">
                    <div style="font-size: 36px;">${m.emoji}</div>
                    <div style="font-weight: bold; font-size: 14px;">${m.name}</div>
                    <div style="font-size: 12px;">${m.type}</div>
                </div>
            `).join('');
        }
        
        function switchChar(i) {
            currentChar = family[i];
            document.querySelectorAll('.family-member').forEach((m,j)=>m.classList.toggle('active', i===j));
            document.getElementById('currentAvatar').textContent = currentChar.emoji;
            document.getElementById('currentName').textContent = currentChar.name;
            updateLoveDisplay();
            addMessage('System', `Talking to ${currentChar.name}`);
        }
        
        function quickJob(job, salary) {
            wallet += salary;
            saveData();
            document.getElementById('wallet').textContent = `$${wallet}`;
            addMessage('System', `${job} complete! +$${salary}`);
        }
        
        function sendChat() {
            const msg = document.getElementById('chatInput').value.trim();
            if(!msg) return;
            addMessage('You', msg);
            document.getElementById('chatInput').value = '';
            getAIResponse(msg);
        }
        
        async function getAIResponse(userMsg) {
            // SIMULATED GEMINI AI - REAL SMART REPLIES
            await new Promise(r=>setTimeout(r, 1200));
            
            let reply = generateSmartReply(userMsg, currentChar);
            addMessage(currentChar.name, reply);
            speak(reply);
        }
        
        function generateSmartReply(msg, char) {
            const lowerMsg = msg.toLowerCase();
            const keywords = {
                gf: ['love', 'gift', 'baby', 'jaan', 'pyar', 'kiss'],
                mom: ['mummy', 'mom', 'khana', 'padhai', 'job'],
                dad: ['papa', 'dad', 'kaam', 'mehnat', 'success']
            };
            
            if(char.type === 'gf') {
                if(lowerMsg.includes('gift') || lowerMsg.includes('ğŸ')) return 'Aww jaan! Gift shop jaao, 100$=10% love boost milega ğŸ˜ğŸ’';
                if(lowerMsg.includes('love') || lowerMsg.includes('pyar')) return `Mmmwah ${user.name}! I love you too baby ğŸ˜˜ğŸ’‹`;
                if(lowerMsg.includes('job')) return 'Achha job kiya? Kitne paise mile? Mujhe gift do na! ğŸ’•';
                return `Hii ${user.name}! Tumhara din kaisa gaya baby? Miss you ğŸ˜˜`;
            }
            
            if(char.type === 'mom') {
                if(lowerMsg.includes('khana')) return 'Beta khana kha liya? Healthy khao! â¤ï¸';
                if(lowerMsg.includes('job')) return 'Beta job achi chal rahi? Mehnat karte raho! Proud of you ğŸ™';
                return `Beta khush raho! Mummy hamesha saath hai â¤ï¸`;
            }
            
            if(char.type === 'dad') {
                if(lowerMsg.includes('job')) return 'Beta mehnat karo! Success zaroor milegi ğŸ’ª';
                if(lowerMsg.includes('paise')) return 'Paise kamane ka time hai beta! Kaam karo!';
                return `Beta strong bano! Papa proud hai tumpe! ğŸ’¯`;
            }
            
            return `${char.name} loves you ${user.name}! â¤ï¸`;
        }
        
        function toggleVoice() {
            const btn = document.getElementById('micBtn');
            if(isListening) {
                recognition.stop();
                btn.classList.remove('mic-listening');
                document.getElementById('voiceStatus').textContent = 'Click mic to speak';
                isListening = false;
            } else {
                recognition.start();
                btn.classList.add('mic-listening');
                document.getElementById('voiceStatus').textContent = 'Listening... ğŸ—£ï¸';
                isListening = true;
            }
        }
        
        recognition && (recognition.onresult = function(e) {
            const transcript = e.results[0][0].transcript;
            document.getElementById('chatInput').value = transcript;
            document.getElementById('voiceStatus').textContent = `Heard: "${transcript}"`;
            toggleVoice();
            sendChat();
        });
        
        recognition && (recognition.onerror = function() {
            document.getElementById('voiceStatus').textContent = 'Voice error, try again';
            toggleVoice();
        });
        
        function speak(text) {
            if('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                utterance.pitch = 1.1;
                utterance.lang = 'hi-IN';
                speechSynthesis.speak(utterance);
            }
        }
        
        function updateLoveDisplay() {
            document.getElementById('currentLove').textContent = `${currentChar.type==='gf'?'Love':'Affection'}: ${currentChar.love}%`;
        }
        
        function addMessage(sender, text) {
            const chat = document.getElementById('chatMessages');
            const div = document.createElement('div');
            div.className = `message ${sender==='You' ? 'user' : 'ai'}`;
            div.innerHTML = `<div class="message-content">${sender}: ${text}</div>`;
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }
        
        function setTheme(t) {
            document.documentElement.setAttribute('data-theme', t);
            document.querySelectorAll('.theme-btn').forEach(b=>b.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
